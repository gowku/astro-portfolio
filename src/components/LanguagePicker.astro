---
import { languages } from '../i18n/ui';
import { getLangFromUrl } from '../i18n/utils';

const UILang = getLangFromUrl(Astro.url);

//voir pour utiliser les customs slugs pour rediriger directement vers les projets quand changements de langues. (pour enlever le en ou fr )
const pathName = Astro.url.pathname.split('/')[2];
// const pathName = Astro.url.pathname.split('/').slice(2).join('/');
---

<div class='lang'>
    {
        Object.entries(languages).map(([lang, label], index) => (
            <>
                <a
                    class:list={[
                        'item',
                        {
                            active: UILang === lang
                        }
                    ]}
                    href={`/${lang}/${pathName}`}>
                    {lang}
                </a>
                {index !== 1 && <span class='slash'>/</span>}
            </>
        ))
    }
</div>

<style lang='scss'>
    .lang {
        display: flex;
        align-items: center;
        margin-left: 20px;
        color: var(--accent-dark);
        height: 100%;
        .item {
            text-transform: capitalize;
            text-decoration: none;
            font-size: var(--text-base);
            height: 100%;
            display: flex;
            align-items: center;
        }
        .item:hover {
            color: var(--accent-text-over);
        }

        .slash {
            margin: 0 5px;
        }
        .active {
            font-size: var(--text-lg);
        }
    }
</style>
